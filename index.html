<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="theme-color" content="#1a2a6c">
<link rel="apple-touch-icon" href="ChatGPT Image Oct 5, 2025, 12_37_25 AM.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="GTT">
<title>郭彤彤</title>
<link href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/lxgwwenkai-regular.min.css" rel="stylesheet">
<link rel="preload" as="audio" href="coin-flip-shimmer-85750.mp3" type="audio/mpeg">

<style>
  /* === iOS-compatible dimming overlay === */
  #dim-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    opacity: 0;
    transition: opacity 0.4s ease;
    z-index: 800;
    pointer-events: none;
  }
  
  body.raining #dim-overlay {
    opacity: 1;
  }
  
  #splash-particles {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: 9998;
  pointer-events: none;
  opacity: 0.4;
  }
  /* Reset */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  /* Background fix for iOS */
  html {
    height: 100%;
    width: 100%;
    background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
    background-size: 400% 400%;
    animation: gradientShift 15s ease infinite;
    margin: 0;
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  body {
    height: 100%;
    width: 100%;
    background: transparent !important;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'LXGW WenKai', 'Inter', 'PingFang SC', sans-serif;
    overflow: hidden;
    margin: 0;
    -webkit-touch-callout: none;
    -webkit-text-size-adjust: 100%;
  }

  /* Frosted panel */
  .container {
    text-align: center;
    max-width: 350px;
    width: 100%;
    background: rgba(255, 255, 255, 0.12);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: 20px;
    padding: 30px 20px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.08);
    position: relative;
    z-index: 1;
  }
  .container::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0) 70%);
    z-index: -1;
  }

  .mute-btn {
    position: absolute;
    top: 10px;
    right: 12px;
    background: transparent;
    border: none;
    padding: 6px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.25s ease;
    -webkit-tap-highlight-color: transparent;
  }
  .mute-btn:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: scale(1.05);
  }
  .mute-btn svg {
    transition: opacity 0.25s ease;
  }
  .mute-btn.active {
  background: rgba(255, 255, 255, 0.2);
  box-shadow: 0 0 6px rgba(255, 255, 255, 0.6);
  }

  .effect-btn {
  position: absolute;
  top: 10px;
  right: 50px; /* sits left of mute button */
  background: transparent;
  border: none;
  padding: 6px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.25s ease;
  -webkit-tap-highlight-color: transparent;
  }
  .effect-btn:hover {
  background: rgba(255, 255, 255, 0.12);
  transform: scale(1.05);
  }
  .effect-btn.active {
  background: rgba(255, 255, 255, 0.2);
  box-shadow: 0 0 6px rgba(255, 255, 255, 0.6);
  }

  /* Game button in bottom left corner */
  .game-btn {
    position: absolute;
    top: 10px;
    left: 12px;
    background: transparent;
    border: none;
    padding: 6px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.25s ease;
    -webkit-tap-highlight-color: transparent;
  }
  .game-btn:hover {
    background: rgba(255, 255, 255, 0.12);
    transform: scale(1.05);
  }

  /* Creamy glowy text */
  h1,
  .subtitle,
  .result-text,
  .stat-value,
  .stat-label,
  .coin-letter {
    color: #fff8e7;
    text-shadow: 0 0 2px rgba(255, 248, 231, 0.3),
                 0 0 4px rgba(255, 248, 231, 0.2),
                 0 0 6px rgba(255, 248, 231, 0.15);
  }
  .subtitle,
  .stat-label {
    text-shadow: 0 0 1px rgba(255, 248, 231, 0.2);
  }

  /* Subtitle */
  .subtitle {
    font-size: 1rem;
    margin-bottom: 25px;
    line-height: 1.5;
    font-weight: 300;
  }

  /* Enhanced Coin Design */
  .coin-container {
    perspective: 1000px;
    width: 150px;
    height: 150px;
    margin: 0 auto 20px;
    position: relative;
  }
  .coin {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 1.5s ease-in-out;
  }
  .coin.flipping {
    animation: flip 1.5s ease-in-out;
  }
  .coin-face {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 3.5rem;
    font-weight: bold;
    overflow: hidden;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    
    /* Enhanced metallic look with better shine */
    background: radial-gradient(circle at 30% 30%, 
                #f9f9f9 0%, 
                #e8e8e8 15%, 
                #c9c9c9 40%, 
                #a8a8a8 70%, 
                #8a8a8a 100%);
    border: 6px solid #d4d4d4;
    
    /* Enhanced shadows for more depth */
    box-shadow:
      0 12px 30px rgba(0, 0, 0, 0.4),
      inset 0 -10px 20px rgba(0, 0, 0, 0.5),
      inset 0 10px 20px rgba(255, 255, 255, 0.6);
  }

  /* Enhanced gleam effect */
  .coin-face::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, 
                rgba(255, 255, 255, 0.8) 0%, 
                rgba(255, 255, 255, 0.4) 20%, 
                rgba(255, 255, 255, 0.2) 40%, 
                transparent 70%);
    z-index: 1;
    pointer-events: none;
  }

  .coin-face::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: conic-gradient(from 0deg, 
                rgba(255, 255, 255, 0.8) 0deg,
                rgba(255, 255, 255, 0.4) 60deg,
                rgba(255, 255, 255, 0.2) 120deg,
                rgba(255, 255, 255, 0.1) 180deg,
                rgba(255, 255, 255, 0.2) 240deg,
                rgba(255, 255, 255, 0.4) 300deg,
                rgba(255, 255, 255, 0.8) 360deg);
    opacity: 0.6;
    animation: spinGleam 4s linear infinite;
    pointer-events: none;
    border-radius: 50%;
    z-index: 2;
  }

  @keyframes spinGleam {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .coin-front {
    transform: rotateY(0deg);
    z-index: 2;
  }
  .coin-back {
    transform: rotateY(180deg);
  }
  .coin-image-container {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    overflow: hidden;
    position: relative;
    z-index: 3;
    box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.3);
  }
  .coin-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  /* Fallback coin design if images don't load */
  .coin-fallback {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    font-size: 2.5rem;
    color: #1a2a6c;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
  }

  /* Result */
  .result {
    font-size: 1.8rem;
    margin: 20px 0;
    min-height: 60px;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .result-text {
    background: rgba(255, 255, 255, 0.15);
    padding: 10px 20px;
    border-radius: 50px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
  }
  .result-text.celebrate {
    animation: celebrate 0.5s ease;
    background: rgba(255, 255, 255, 0.25);
  }

  /* Button */
  button {
    background: linear-gradient(to right, #fff, #f0f0f0);
    color: #1a2a6c;
    border: none;
    padding: 12px 35px;
    font-size: 1rem;
    font-weight: 500;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    position: relative;
    overflow: hidden;
    letter-spacing: 0.5px;
    -webkit-tap-highlight-color: transparent;
  }
  button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    transition: 0.5s;
  }
  button:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);
  }
  button:hover::before {
    left: 100%;
  }
  button:active {
    transform: translateY(1px);
  }
  button:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    transform: none;
  }

  /* Stats */
  .stats {
    display: flex;
    justify-content: space-around;
    margin-top: 15px;
    background: rgba(255, 255, 255, 0.08);
    padding: 15px;
    border-radius: 18px;
    width: 100%;
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.05);
  }
  .stat {
    text-align: center;
    position: relative;
    padding: 0 10px;
  }
  .stat::after {
    content: '';
    position: absolute;
    right: 0;
    top: 20%;
    height: 60%;
    width: 1px;
    background: rgba(255, 255, 255, 0.2);
  }
  .stat:last-child::after {
    display: none;
  }
  .stat-value {
    font-size: 2rem;
    font-weight: bold;
    margin-bottom: 5px;
  }
  .stat-label {
    font-size: 0.9rem;
    opacity: 0.8;
    letter-spacing: 0.5px;
  }

  /* Floating emojis */
  .floating-emojis {
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 0;
    opacity: 0.7;
  }
  .emoji {
    position: absolute;
    font-size: 24px;
    opacity: 0;
    animation: float 8s linear infinite;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
  }
  .emoji:nth-child(3n) { animation-duration: 10s; }
  .emoji:nth-child(3n+1) { animation-duration: 12s; }
  .emoji:nth-child(3n+2) { animation-duration: 14s; }

  /* Animations */
  @keyframes flip {
    0% { transform: rotateY(0); }
    50% { transform: rotateY(1800deg); }
    100% { transform: rotateY(1980deg); }
  }
  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  @keyframes float {
    0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
    10% { opacity: 0.8; }
    90% { opacity: 0.8; }
    100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
  }
  @keyframes celebrate {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
  }

  /* Mobile adjustments */
  @media (max-width: 500px) {
    .container { padding: 25px 15px; }
    h1 { font-size: 2rem; }
    .coin-container { width: 120px; height: 120px; }
    .coin-face { font-size: 2.5rem; }
    .stats { padding: 10px; }
    .stat-value { font-size: 1.6rem; }
    .emoji { font-size: 18px; }
  }
  
  /* === Confetti animation === */
  .confetti {
    position: fixed;
    width: 10px;
    height: 14px;
    opacity: 0.9;
    border-radius: 2px;
    z-index: 9999;
    animation: confettiFall 3s ease-out forwards;
  }
  @keyframes confettiFall {
    0% {
      transform: translateY(-10vh) translateX(0) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(110vh) translateX(var(--xShift)) rotate(720deg);
      opacity: 0;
    }
  }

  /* === Raindrops (reverted to original) === */
  .raindrop {
    position: fixed;
    top: -20px;
    width: 2px;
    height: 18px;
    background: linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(255,255,255,0));
    border-radius: 1px;
    opacity: 0.7;
    z-index: 950;
    animation: fall 1.2s linear infinite;
  }
  @keyframes fall {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(100vh); opacity: 0; }
  }

  /* === Gomoku Game Styles === */
  #gomoku-container {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
    background-size: 400% 400%;
    animation: gradientShift 15s ease infinite;
    z-index: 1000;
    overflow-y: auto;
    padding: 20px;
  }

  .gomoku-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }

  .gomoku-title {
    color: #fff8e7;
    font-size: 1.8rem;
    text-shadow: 0 0 2px rgba(255, 248, 231, 0.3),
                 0 0 4px rgba(255, 248, 231, 0.2),
                 0 0 6px rgba(255, 248, 231, 0.15);
  }

  .gomoku-app {
    display: flex;
    flex-direction: column;
    gap: 20px;
    align-items: center;
    width: 100%;
    max-width: 600px;
    margin: 0 auto;
  }

  .gomoku-panel {
    background: rgba(255, 255, 255, 0.12);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: 20px;
    padding: 20px;
    width: 100%;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.08);
  }

  .gomoku-controls {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .gomoku-control-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .gomoku-board-container {
    width: 100%;
    overflow: auto;
    padding: 10px;
    -webkit-overflow-scrolling: touch;
  }

  .gomoku-board {
    display: grid;
    grid-template-columns: repeat(15, 28px);
    grid-auto-rows: 28px;
    gap: 1px;
    background: 
      linear-gradient(135deg, 
        rgba(255, 255, 255, 0.1) 0%, 
        rgba(255, 255, 255, 0.05) 100%);
    padding: 12px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.15);
    box-shadow: 
      inset 0 0 30px rgba(255, 255, 255, 0.1),
      0 8px 32px rgba(0, 0, 0, 0.3);
    position: relative;
    margin: 0 auto;
    min-width: min-content;
  }

  .gomoku-cell {
    width: 28px;
    height: 28px;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 2px;
    position: relative;
    cursor: pointer;
    transition: transform 0.15s ease, background-color 0.15s ease;
  }

  .gomoku-cell::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 2px;
    z-index: -1;
  }

  .gomoku-cell:hover:not(.disabled) {
    transform: scale(1.05);
    background-color: rgba(255, 255, 255, 0.05);
  }

  .gomoku-cell.disabled {
    cursor: not-allowed;
  }

  .gomoku-stone {
    width: 85%;
    height: 85%;
    border-radius: 50%;
    position: relative;
    box-shadow: 
      0 0 15px rgba(0, 0, 0, 0.3),
      inset 0 -5px 10px rgba(0, 0, 0, 0.25);
    transition: all 0.3s ease;
    z-index: 2;
  }

  .gomoku-stone.black {
    background: radial-gradient(circle at 30% 30%, #2d2d2d, #0a0a0a);
    box-shadow: 
      0 0 15px rgba(0, 0, 0, 0.5),
      inset 0 -5px 10px rgba(0, 0, 0, 0.4),
      0 0 20px rgba(120, 119, 198, 0.4);
  }

  .gomoku-stone.white {
    background: radial-gradient(circle at 30% 30%, #ffffff, #e0e0e0);
    box-shadow: 
      0 0 15px rgba(0, 0, 0, 0.3),
      inset 0 -5px 10px rgba(0, 0, 0, 0.2),
      0 0 20px rgba(255, 255, 255, 0.4);
  }

  .gomoku-stone.placed {
    animation: stonePlace 0.3s ease-out;
  }

  @keyframes stonePlace {
    0% { transform: scale(0); opacity: 0; }
    70% { transform: scale(1.1); opacity: 0.8; }
    100% { transform: scale(1); opacity: 1; }
  }

  .gomoku-status-indicators {
    display: flex;
    gap: 16px;
    margin-top: 16px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .gomoku-indicator {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    min-width: 80px;
  }

  .gomoku-indicator-value {
    font-weight: 600;
    font-size: 16px;
    color: #fff8e7;
  }

  .gomoku-stone-preview {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    margin-top: 4px;
  }

  .gomoku-stone-preview.black {
    background: radial-gradient(circle at 30% 30%, #2d2d2d, #0a0a0a);
    box-shadow: 0 0 8px rgba(120, 119, 198, 0.4);
  }

  .gomoku-stone-preview.white {
    background: radial-gradient(circle at 30% 30%, #ffffff, #e0e0e0);
    box-shadow: 0 0 8px rgba(255, 255, 255, 0.4);
  }

  .gomoku-info {
    margin-top: 8px;
    font-size: 14px;
    padding: 12px;
    border-radius: 10px;
    background: rgba(30, 41, 59, 0.4);
    color: #fff8e7;
  }

  .notification {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(-100px);
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    color: #fff8e7;
    padding: 12px 20px;
    border-radius: 50px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    z-index: 10000;
    opacity: 0;
    transition: all 0.4s ease;
    text-align: center;
    max-width: 80%;
  }

  .notification.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }

  /* === Game Navigation Button === */
  .back-btn {
    background: linear-gradient(to right, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
    color: #fff8e7;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .back-btn:hover {
    background: linear-gradient(to right, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.2));
  }

  /* === Mobile adjustments for Gomoku === */
  @media (max-width: 768px) {
    .gomoku-board {
      grid-template-columns: repeat(15, 24px);
      grid-auto-rows: 24px;
    }
    
    .gomoku-cell {
      width: 24px;
      height: 24px;
    }
    
    .gomoku-title {
      font-size: 1.5rem;
    }
  }

  @media (max-width: 480px) {
    .gomoku-board {
      grid-template-columns: repeat(15, 20px);
      grid-auto-rows: 20px;
    }
    
    .gomoku-cell {
      width: 20px;
      height: 20px;
    }
    
    .gomoku-title {
      font-size: 1.3rem;
    }
  }

</style>
</head>

<body>
<div id="dim-overlay"></div>
<canvas id="splash-particles"></canvas>

<!-- Coin Flip App -->
<div class="container" id="coin-app">
  <!-- Effect Toggle Button -->
<button class="effect-btn" id="effect-btn" aria-label="Toggle visual effects">
  <!-- Cloud OFF (outline) -->
  <svg id="effect-off" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
       fill="none" stroke="#fff8e7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
       width="22" height="22" style="display:block;">
    <path d="M17.5 19a4.5 4.5 0 0 0 0-9 5.5 5.5 0 0 0-10.9 1A4 4 0 0 0 7 19h10.5z"/>
  </svg>

  <!-- Cloud ON (filled + glow) -->
  <svg id="effect-on" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
       fill="#fff8e7" stroke="#fff8e7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
       width="22" height="22" style="display:none; filter: drop-shadow(0 0 6px rgba(255,255,255,0.8));">
    <path d="M17.5 19a4.5 4.5 0 0 0 0-9 5.5 5.5 0 0 0-10.9 1A4 4 0 0 0 7 19h10.5z"/>
  </svg>
</button>


  <button class="mute-btn" id="mute-btn" aria-label="Toggle sound">
    
    <svg id="mute-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#fff8e7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="22" height="22" style="display:none;">
      <path d="M11 5L6 9H2V15H6L11 19V5Z" />
      <line x1="23" y1="9" x2="17" y2="15" />
      <line x1="17" y1="9" x2="23" y2="15" />
    </svg>
    
    <svg id="unmute-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#fff8e7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="22" height="22" style="display:block;">
      <path d="M11 5L6 9H2V15H6L11 19V5Z" />
      <path d="M15.54 8.46C16.4774 9.39764 17.004 10.6692 17.004 12C17.004 13.3308 16.4774 14.6024 15.54 15.54" />
      <path d="M19.07 4.93C20.9447 6.80528 21.9979 9.34836 21.9979 12C21.9979 14.6516 20.9447 17.1947 19.07 19.07" />
    </svg>
    
  </button>
  
  <!-- Game Button in Bottom Left Corner -->
  <button class="game-btn" id="game-btn" aria-label="Play Gomoku game">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#fff8e7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="22" height="22">
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
      <line x1="3" y1="9" x2="21" y2="9"></line>
      <line x1="3" y1="15" x2="21" y2="15"></line>
      <line x1="9" y1="3" x2="9" y2="21"></line>
      <line x1="15" y1="3" x2="15" y2="21"></line>
    </svg>
  </button>

  <h1>欢迎小宝宝！</h1>
  <p class="subtitle">
    这只是一件平常的小事，并不会决定你的运气宝宝。但如果它能给你一点点激励，那就是我最大的心愿。
    不管怎样，你永远是最棒的郭彤彤。我爱你。
  </p>

  <div class="coin-container">
    <div class="coin" id="coin">
      <div class="coin-face coin-front">
        <div class="coin-image-container">
          <img src="A.png" class="coin-image" alt="A Side" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div class="coin-fallback" style="display:none;">A</div>
        </div>
      </div>
      <div class="coin-face coin-back">
        <div class="coin-image-container">
          <img src="B.png" class="coin-image" alt="B Side" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div class="coin-fallback" style="display:none;">B</div>
        </div>
      </div>
    </div>
  </div>

  <div class="result">
    <div class="result-text" id="result">宝宝开始吧！</div>
  </div>
  <button id="flip-button">翻转硬币</button>

  <div class="stats">
    <div class="stat">
      <div class="stat-value" id="a-count">0</div>
      <div class="stat-label">A面次数</div>
    </div>
    <div class="stat">
      <div class="stat-value" id="total-count">0</div>
      <div class="stat-label">总次数</div>
    </div>
    <div class="stat">
      <div class="stat-value" id="b-count">0</div>
      <div class="stat-label">B面次数</div>
    </div>
  </div>
</div>

<!-- Gomoku Game -->
<div id="gomoku-container">
  <div class="gomoku-header">
    <button id="back-to-coin-btn" class="back-btn">返回硬币游戏</button>
    <h1 class="gomoku-title">五子棋游戏</h1>
    <div style="width: 120px;"></div> <!-- Spacer for alignment -->
  </div>
  
  <div class="gomoku-app">
    <div class="gomoku-panel">
      <div class="gomoku-controls">
        <div class="gomoku-control-group">
          <label for="gomoku-roomId">房间代码</label>
          <input id="gomoku-roomId" placeholder="输入或创建房间代码" />
          <div class="button-group">
            <button id="gomoku-createBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14"/>
              </svg>
              创建房间
            </button>
            <button id="gomoku-joinBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M13.8 12H3"/>
              </svg>
              加入房间
            </button>
          </div>
        </div>

        <div class="gomoku-control-group">
          <div class="button-group">
            <button id="gomoku-resetBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                <path d="M3 3v5h5"/>
              </svg>
              重置棋盘
            </button>
            <button id="gomoku-leaveBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                <polyline points="16,17 21,12 16,7"/>
                <line x1="21" y1="12" x2="9" y2="12"/>
              </svg>
              离开房间
            </button>
          </div>
        </div>

        <div class="gomoku-info" id="gomoku-status">未连接</div>
        <div class="gomoku-info muted" id="gomoku-players">玩家: -</div>
      </div>
    </div>

    <div class="gomoku-panel">
      <div class="gomoku-board-container">
        <div id="gomoku-board" class="gomoku-board"></div>
      </div>
      <div class="gomoku-status-indicators">
        <div class="gomoku-indicator">
          <div class="muted">当前回合</div>
          <div id="gomoku-turnIndicator" class="gomoku-indicator-value">—</div>
          <div id="gomoku-turnStone" class="gomoku-stone-preview"></div>
        </div>
        <div class="gomoku-indicator">
          <div class="muted">你的颜色</div>
          <div id="gomoku-youIndicator" class="gomoku-indicator-value">—</div>
          <div id="gomoku-yourStone" class="gomoku-stone-preview"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="floating-emojis" id="emojis-container"></div>

<audio id="flip-sound" preload="auto">
  <source src="coin-flip-shimmer-85750.mp3" type="audio/mpeg">
</audio>

<audio id="bgm" loop preload="auto">
  <source src="S.mp3" type="audio/mpeg">
</audio>

<script>
// === Notification System ===
function showNotification(message, duration = 3000) {
  const notification = document.createElement('div');
  notification.className = 'notification';
  notification.textContent = message;
  document.body.appendChild(notification);
  
  // Trigger animation
  setTimeout(() => notification.classList.add('show'), 10);
  
  // Remove after duration
  setTimeout(() => {
    notification.classList.remove('show');
    setTimeout(() => {
      if (notification.parentNode) {
        notification.parentNode.removeChild(notification);
      }
    }, 400);
  }, duration);
}

// === App Navigation ===
document.addEventListener('DOMContentLoaded', function() {
  const coinApp = document.getElementById('coin-app');
  const gomokuContainer = document.getElementById('gomoku-container');
  const gameBtn = document.getElementById('game-btn');
  const backToCoinBtn = document.getElementById('back-to-coin-btn');
  
  gameBtn.addEventListener('click', function() {
    coinApp.style.display = 'none';
    gomokuContainer.style.display = 'block';
  });
  
  backToCoinBtn.addEventListener('click', function() {
    gomokuContainer.style.display = 'none';
    coinApp.style.display = 'block';
  });
});

// === Coin Flip App Logic ===
document.addEventListener('DOMContentLoaded', function() {
  const coin = document.getElementById('coin');
  const flipButton = document.getElementById('flip-button');
  const result = document.getElementById('result');
  const aCount = document.getElementById('a-count');
  const bCount = document.getElementById('b-count');
  const totalCount = document.getElementById('total-count');
  const emojisContainer = document.getElementById('emojis-container');
  const flipSound = document.getElementById('flip-sound');
  const muteBtn = document.getElementById('mute-btn');
  const muteIcon = document.getElementById('mute-icon');
  const unmuteIcon = document.getElementById('unmute-icon');
  const bgm = document.getElementById('bgm');
  const dimOverlay = document.getElementById('dim-overlay');

  const effectBtn = document.getElementById('effect-btn');
  const effectOn = document.getElementById('effect-on');
  const effectOff = document.getElementById('effect-off');

  let effectsEnabled = true; // start OFF every time
  let isMuted = true;
  flipSound.muted = true;
  bgm.muted = true;
  muteIcon.style.display = 'block';
  unmuteIcon.style.display = 'none';
  effectOn.style.display = 'block';
  effectOff.style.display = 'none';
  effectBtn.classList.toggle('active', effectsEnabled);

  // --- EFFECT TOGGLE ---
  effectBtn.addEventListener('click', () => {
  effectsEnabled = !effectsEnabled;
  effectOn.style.display = effectsEnabled ? 'block' : 'none';
  effectOff.style.display = effectsEnabled ? 'none' : 'block';
  effectBtn.classList.toggle('active', effectsEnabled);
});

  // --- BGM AUTOPLAY ---
  function tryPlayBgm() {
    bgm.volume = 0.07;
    bgm.play().catch(() => {
      const resume = () => {
        bgm.play().catch(()=>{});
        document.removeEventListener('touchstart', resume);
        document.removeEventListener('click', resume);
      };
      document.addEventListener('touchstart', resume, { once: true });
      document.addEventListener('click', resume, { once: true });
    });
  }
  tryPlayBgm();

  // --- MUTE BUTTON ---
  muteBtn.addEventListener('click', () => {
    isMuted = !isMuted;
    muteIcon.style.display = isMuted ? 'block' : 'none';
    unmuteIcon.style.display = isMuted ? 'none' : 'block';
    muteBtn.classList.toggle('active', !isMuted);
    flipSound.muted = isMuted;
    bgm.muted = isMuted;
  });

  // --- CONFETTI ---
  function createConfetti() {
    for (let i = 0; i < 120; i++) {
      const confetti = document.createElement('div');
      confetti.classList.add('confetti');
      confetti.style.left = Math.random() * 100 + 'vw';
      confetti.style.top = '-10vh';
      confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 80%, 60%)`;
      confetti.style.setProperty('--xShift', (Math.random() * 200 - 100) + 'px');
      confetti.style.animationDelay = (Math.random() * 0.8) + 's';
      confetti.style.animationDuration = (2.5 + Math.random() * 1.5) + 's';
      document.body.appendChild(confetti);
      setTimeout(() => confetti.remove(), 2500);
    }
  }

  // --- RAIN ---
  const thunderAudio = new Audio('thunder-soft.mp3');
  thunderAudio.volume = 0.3;
  function createRainScene() {
    document.body.classList.add('raining');
    dimOverlay.style.opacity = '1';
    const rainContainer = document.createElement('div');
    rainContainer.classList.add('rain-container');
    document.body.appendChild(rainContainer);

    for (let i = 0; i < 70; i++) {
      const drop = document.createElement('div');
      drop.classList.add('raindrop');
      drop.style.left = Math.random() * 100 + 'vw';
      drop.style.animationDuration = (0.7 + Math.random() * 0.6) + 's';
      drop.style.animationDelay = Math.random() + 's';
      rainContainer.appendChild(drop);
    }

    if (!isMuted) {
      thunderAudio.currentTime = 0;
      thunderAudio.play().catch(()=>{});
    }

    setTimeout(() => {
      dimOverlay.style.opacity = '0';
      setTimeout(() => {
        document.body.classList.remove('raining');
        rainContainer.remove();
      }, 400);
    }, 2500);
  }

  // --- COIN FLIP ---
  let isFlipping = false, aCounter = 0, bCounter = 0, totalFlips = 0;
  
  const cuteEmojis=['❤️','✨','🌟','🥰','😊','🌸','💫','🎀','💖','🦋','🐰','🐱','🐶','🌈','🎈','🎵','💕','💝','💘','💓','💗','💞','💟','❣️','⭐','🌺','🌷','💐','🌼','🦄','🍀','🎂','🍬','🍭','🎁','🎀','👑','💎','🔮','🎵'];

    function createEmojis(){
        for(let i=0;i<25;i++){
            const emoji=document.createElement('div');
            emoji.className='emoji';
            emoji.innerHTML=cuteEmojis[Math.floor(Math.random()*cuteEmojis.length)];
            emoji.style.left=Math.random()*100+'vw';
            emoji.style.animationDelay=Math.random()*8+'s';
            emoji.style.fontSize=(Math.random()*20+15)+'px';
            emoji.style.animation=`float ${8+Math.random()*6}s linear infinite`;
            emojisContainer.appendChild(emoji);
        }
    }
  createEmojis();

  const canvas = document.getElementById('splash-particles');
  const ctx = canvas.getContext('2d');
  canvas.width = innerWidth;
  canvas.height = innerHeight;
  let particles = Array.from({ length:120 }, () => ({
    x: Math.random() * innerWidth,
    y: Math.random() * innerHeight,
    r: Math.random() * 2 + 1,
    dx: (Math.random() - 0.5) * 0.3,
    dy: (Math.random() - 0.5) * 0.3,
  }));

  function drawParticles() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = 'rgba(255,255,255,0.7)';
    for (let p of particles) {
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fill();
      p.x += p.dx; p.y += p.dy;
      if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
      if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
    }
    requestAnimationFrame(drawParticles);
  }
  drawParticles();
  
  flipButton.addEventListener('click', function() {
    if (isFlipping) return;
    isFlipping = true;
    flipButton.disabled = true;
    result.textContent = "翻转中...";

    if (!isMuted) {
      flipSound.pause();
      flipSound.currentTime = 0;
      // Force a small reflow tick to ensure reset on iOS
      requestAnimationFrame(() => flipSound.play().catch(()=>{}));
    }

    const isA = Math.random() < 0.5;
    const fullSpins = 5;
    const finalAngle = isA ? 0 : 180;
    const totalRotation = 360 * fullSpins + finalAngle;
    coin.style.transition = 'transform 2s cubic-bezier(0.25, 1, 0.5, 1)';
    coin.style.transform = `rotateY(${totalRotation}deg)`;

    setTimeout(() => {
  coin.style.transition = 'none';
  coin.style.transform = `rotateY(${finalAngle}deg)`;
  if (isA) {
    result.innerHTML = "是 <strong>A</strong>！";
    aCounter++; aCount.textContent = aCounter;
    if (effectsEnabled) createConfetti();
  } else {
    result.innerHTML = "是 <strong>傻B :(</strong>";
    bCounter++; bCount.textContent = bCounter;
    if (effectsEnabled) createRainScene();
  }
  result.classList.add('celebrate');
  setTimeout(() => result.classList.remove('celebrate'), 500);
  totalFlips++; totalCount.textContent = totalFlips;

  // Enable button immediately if effects are disabled
  if (!effectsEnabled) {
    isFlipping = false;
    flipButton.disabled = false;
  }
  // If effects are enabled, wait for animation to end
  else {
    setTimeout(() => {
      isFlipping = false;
      flipButton.disabled = false;
    }, 3000); // Wait longer for effects to finish
  }
}, 2000);
  });

  // --- Prevent iOS double-tap zoom ---
  let lastTouchEnd = 0;
  document.addEventListener('touchend', function(event) {
    const now = (new Date()).getTime();
    if (now - lastTouchEnd <= 300) event.preventDefault();
    lastTouchEnd = now;
  }, false);
});

// === Gomoku Game Logic ===
document.addEventListener('DOMContentLoaded', function() {
  // UI Elements
  const boardEl = document.getElementById('gomoku-board');
  const statusEl = document.getElementById('gomoku-status');
  const playersEl = document.getElementById('gomoku-players');
  const turnEl = document.getElementById('gomoku-turnIndicator');
  const youEl = document.getElementById('gomoku-youIndicator');
  const turnStoneEl = document.getElementById('gomoku-turnStone');
  const yourStoneEl = document.getElementById('gomoku-yourStone');
  const roomInput = document.getElementById('gomoku-roomId');
  const createBtn = document.getElementById('gomoku-createBtn');
  const joinBtn = document.getElementById('gomoku-joinBtn');
  const resetBtn = document.getElementById('gomoku-resetBtn');
  const leaveBtn = document.getElementById('gomoku-leaveBtn');

  const SIZE = 15;
  let localUID = null;
  let roomId = null;
  let role = null;
  let board = Array(SIZE).fill(null).map(()=>Array(SIZE).fill(null));
  let turn = 'black';
  let status = 'idle';

  // Initialize game
  function initializeGame() {
    showNotification('游戏已准备就绪', 2000);
    // Simulate connection
    setTimeout(() => {
      localUID = 'user-' + Math.random().toString(36).substr(2, 9);
      statusEl.textContent = '已连接 - 准备游戏';
      showNotification('连接成功！', 1500);
    }, 1000);
  }

  // Board rendering
  function renderBoard(){
    boardEl.innerHTML = '';
    for(let r=0;r<SIZE;r++){
      for(let c=0;c<SIZE;c++){
        const cell = document.createElement('div');
        cell.className = 'gomoku-cell';
        cell.dataset.r = r; cell.dataset.c = c;
        const val = board[r][c];
        if(val){
          const s = document.createElement('div'); 
          s.className='gomoku-stone '+val; 
          cell.appendChild(s);
          cell.classList.add('disabled');
        }
        cell.addEventListener('click', onCellClick);
        boardEl.appendChild(cell);
      }
    }
    
    // Update indicators
    turnEl.textContent = turn || '—';
    turnStoneEl.className = 'gomoku-stone-preview ' + (turn || '');
    youEl.textContent = role || '—';
    yourStoneEl.className = 'gomoku-stone-preview ' + (role || '');
  }

  function onCellClick(e){
    const r = +e.currentTarget.dataset.r, c = +e.currentTarget.dataset.c;
    if(status!=='playing'){showNotification('请先创建或加入房间');return}
    if(role!==turn){showNotification("现在不是你的回合");return}
    if(board[r][c]){return}
    
    // Add animation
    const stone = document.createElement('div');
    stone.className = `gomoku-stone ${role} placed`;
    e.currentTarget.appendChild(stone);
    
    // Update board state
    board[r][c] = role;
    
    // Check for win
    const win = checkWin(board, r, c, role);
    if(win){
      showNotification(`玩家 ${role} 获胜！`, 4000);
      status = 'idle';
    } else {
      // Switch turns
      turn = (role === 'black') ? 'white' : 'black';
      renderBoard();
    }
  }

  // Room management
  function generateRoomCode(){
    return Math.random().toString(36).slice(2,8).toUpperCase();
  }

  createBtn.addEventListener('click', async ()=>{
    const id = generateRoomCode();
    roomInput.value = id;
    await createRoom(id);
  });
  
  joinBtn.addEventListener('click', async ()=>{
    const id = roomInput.value.trim(); 
    if(!id){showNotification('请输入房间代码或创建一个新房间');return}
    await joinRoom(id);
  });
  
  resetBtn.addEventListener('click', async ()=>{
    if(!roomId){showNotification('没有加入任何房间');return}
    board = Array(SIZE).fill(null).map(()=>Array(SIZE).fill(null));
    turn = 'black';
    renderBoard();
    showNotification('棋盘已重置');
  });
  
  leaveBtn.addEventListener('click', ()=>{leaveRoom();});

  async function createRoom(id){
    showNotification(`正在创建房间 ${id}...`);
    // Simulate room creation
    setTimeout(() => {
      roomId = id;
      status = 'playing';
      role = 'black';
      turn = 'black';
      renderBoard();
      updateStatus();
      playersEl.textContent = `玩家: 黑棋=你 白棋=—`;
      showNotification(`房间 ${id} 创建成功！你是黑棋`, 3000);
    }, 1000);
  }

  async function joinRoom(id) {
    if (!localUID) {
      showNotification('尚未连接，请稍候...');
      return;
    }

    showNotification(`正在加入房间 ${id}...`);
    // Simulate joining room
    setTimeout(() => {
      roomId = id;
      status = 'playing';
      role = 'white';
      turn = 'black';
      renderBoard();
      updateStatus();
      playersEl.textContent = `玩家: 黑棋=— 白棋=你`;
      showNotification(`成功加入房间 ${id}！你是白棋`, 3000);
    }, 1000);
  }

  function leaveRoom(){
    if(!roomId) return;
    roomId=null; role=null; status='idle'; 
    board=Array(SIZE).fill(null).map(()=>Array(SIZE).fill(null)); 
    renderBoard(); 
    updateStatus();
    playersEl.textContent = `玩家: -`;
    showNotification('已离开房间');
  }

  function updateStatus(){ 
    statusEl.textContent = `状态: ${status} ${roomId ? ' — 房间 '+roomId : ''}`;
  }

  // Win detection
  function checkWin(bd, r, c, color){
    if(!color) return false;
    const dirs = [[1,0],[0,1],[1,1],[1,-1]];
    for(const [dr,dc] of dirs){
      let n=1;
      n += countDir(bd,r,c,dr,dc,color);
      n += countDir(bd,r,c,-dr,-dc,color);
      if(n>=5) return true;
    }
    return false;
  }
  
  function countDir(bd,r,c,dr,dc,color){
    let i=1,cnt=0; while(true){
      const rr=r+dr*i, cc=c+dc*i; 
      if(rr<0||cc<0||rr>=SIZE||cc>=SIZE) break; 
      if(bd[rr][cc]===color){cnt++; i++;} else break;
    } return cnt;
  }

  // Initialize
  initializeGame();
  renderBoard(); 
  updateStatus();
});
</script>

</body>
</html>
